<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background: #121212; color: white; font-family: sans-serif; display: flex; justify-content: center; padding: 20px; }
        .recharge-card { background: #1e1e1e; width: 100%; max-width: 350px; border-radius: 15px; padding: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); text-align: center; }
        
        .header h2 { color: #ffc107; font-size: 20px; margin-bottom: 5px; }
        .header p { color: #888; font-size: 12px; margin-bottom: 20px; }

        .input-box { background: #2a2a2a; border: 1px solid #333; border-radius: 10px; padding: 10px; margin-bottom: 20px; }
        .input-box label { display: block; font-size: 12px; color: #ffc107; margin-bottom: 5px; text-align: left; }
        .input-box input { width: 100%; background: transparent; border: none; color: white; font-size: 24px; font-weight: bold; text-align: center; outline: none; }

        .pay-btn { background: #ffc107; color: black; border: none; width: 100%; padding: 12px; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .pay-btn:active { transform: scale(0.95); }

        #utr_section { margin-top: 25px; display: none; border-top: 1px solid #333; padding-top: 20px; }
        .utr-input { width: 100%; padding: 12px; border-radius: 8px; background: #000; border: 1px solid #444; color: white; margin-bottom: 10px; }
        .submit-btn { background: #28a745; color: white; border: none; width: 100%; padding: 12px; border-radius: 8px; font-weight: bold; }
    </style>
</head>
<body>

<div class="recharge-card">
    <div class="header">
        <h2>Recharge Wallet</h2>
        <p>Enter amount and pay via any UPI app</p>
    </div>

    <div class="input-box">
        <label>Recharge Amount (₹)</label>
        <input type="number" id="recharge_amount" value="570">
    </div>

    <button class="pay-btn" onclick="payWithUPI()">
        <i class="fas fa-bolt"></i> PAY WITH UPI APP
    </button>

    <div id="utr_section">
        <p style="font-size: 13px; color: #ffc107; margin-bottom: 10px;">Payment successful? Enter 12-digit UTR:</p>
        <input type="number" id="utr_number" class="utr-input" placeholder="Example: 498273645123">
        <button class="submit-btn" onclick="submitData()">SUBMIT TO SHEET</button>
    </div>
</div>

<script>
    function payWithUPI() {
        var amt = document.getElementById('recharge_amount').value;
        var upiID = "8968146117@ybl"; //

        if (!amt || amt < 1) {
            alert("Bhai, kam se kam ₹1 dalo!");
            return;
        }

        // UPI Link
        var url = "upi://pay?pa=" + upiID + "&pn=JCB_Mining&am=" + amt + "&cu=INR";
        window.location.href = url;

        // UTR box dikhane ke liye
        setTimeout(function() {
            document.getElementById('utr_section').style.display = 'block';
        }, 2000);
    }

    function submitData() {
        var amt = document.getElementById('recharge_amount').value;
        var utr = document.getElementById('utr_number').value;
        var phone = localStorage.getItem('userPhone'); 
        var scriptURL = 'https://script.google.com/macros/s/AKfycbyWqwd09HQOZiB_-6HpMnhF-WR5PclYPqSSRRNDqHRX1OnCazgob6lNhMYOWMpa80Jn/exec';

        if (utr.length < 12) {
            alert("Bhai, 12 digit ka UTR sahi se dalo!");
            return;
        }

        fetch(scriptURL, {
            method: 'POST',
            mode: 'no-cors',
            body: JSON.stringify({
                phone: phone,
                type: 'RECHARGE',
                amount: amt,
                details: 'UTR: ' + utr
            })
        }).then(function() {
            alert("Request Sent! Sheet check karein.");
            window.location.href = 'home.html';
        });
    }
</script>

</body>
</html>
